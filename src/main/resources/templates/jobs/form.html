<!doctype html>
<html lang="es" th:replace="layout :: layout(~{::title}, ~{::section})" th:with="editing=${job.id != null}">
<title th:text="${editing} ? 'Editar oferta' : 'Nueva oferta'">Form</title>

<section>
    <form th:action="${editing} ? @{|/jobs/${job.id}/edit|} : @{/jobs}" th:object="${job}" method="post"
        class="mx-auto max-w-3xl rounded-2xl border bg-white p-6 shadow-sm grid gap-4">

        <div>
            <label class="block text-sm font-semibold">Título</label>
            <input th:field="*{title}" class="w-full rounded-xl border px-4 py-2" />
            <p class="text-rose-600 text-sm" th:if="${#fields.hasErrors('title')}" th:errors="*{title}"></p>
        </div>

        <div class="grid sm:grid-cols-2 gap-4">
            <div>
                <label class="block text-sm font-semibold">Empresa</label>
                <input th:field="*{company}" class="w-full rounded-xl border px-4 py-2" />
                <p class="text-rose-600 text-sm" th:if="${#fields.hasErrors('company')}" th:errors="*{company}"></p>
            </div>
            <div>
                <label class="block text-sm font-semibold">Ubicación</label>
                <input th:field="*{location}" class="w-full rounded-xl border px-4 py-2" />
                <p class="text-rose-600 text-sm" th:if="${#fields.hasErrors('location')}" th:errors="*{location}"></p>
            </div>
        </div>

        <div class="grid sm:grid-cols-2 gap-4">
            <div>
                <label class="block text-sm font-semibold">Modalidad</label>
                <select th:field="*{workMode}" class="w-full rounded-xl border px-4 py-2">
                    <option th:each="m : ${workModes}" th:value="${m}" th:text="${m}"></option>
                </select>
            </div>
            <div>
                <label class="block text-sm font-semibold">Tipo</label>
                <select th:field="*{type}" class="w-full rounded-xl border px-4 py-2">
                    <option th:each="t : ${types}" th:value="${t}" th:text="${t}"></option>
                </select>
            </div>
        </div>

        <div class="grid sm:grid-cols-2 gap-4">
            <div>
                <label class="block text-sm font-semibold">Salario mínimo</label>
                <input type="number" th:field="*{salaryMin}" class="w-full rounded-xl border px-4 py-2" />
            </div>
            <div>
                <label class="block text-sm font-semibold">Salario máximo</label>
                <input type="number" th:field="*{salaryMax}" class="w-full rounded-xl border px-4 py-2" />
            </div>
        </div>

        <div>
            <label class="block text-sm font-semibold">Descripción</label>
            <textarea th:field="*{description}" rows="5" class="w-full rounded-xl border px-4 py-2"></textarea>
            <p class="text-rose-600 text-sm" th:if="${#fields.hasErrors('description')}" th:errors="*{description}"></p>
        </div>

        <div class="flex gap-3">
            <button class="rounded-xl bg-indigo-600 text-white px-5 py-2 font-semibold"
                th:text="${editing} ? 'Guardar cambios' : 'Crear oferta'">Guardar</button>
            <a href="/jobs" class="rounded-xl bg-slate-200 px-5 py-2">Cancelar</a>
        </div>
    </form>
</section>

</html>